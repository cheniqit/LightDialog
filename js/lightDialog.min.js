!function(a,b){var c,d,e=document.documentElement,f=a(b),g=a(document),h="setCapture"in e,i=9,j=function(a,b){return function(){return b.apply(a,arguments)}};a(function(){c=a("body");var b;a.each(this.getElementsByTagName("*"),function(c,d){b=d.style&&parseFloat(a(d).css("zIndex"))||0,i=Math.max(b,i)})}),a.lightDialog=function(){this.init.apply(this,arguments)},a.lightDialog.fn=a.lightDialog.prototype={title:"title",topStyle:"AT-focus",fixed:!0,left:"center",top:"center",width:600,height:360,limit:!1,drag:!0,showHeader:!0,actions:["close"],dblfull:!0,ondown:a.noop,onmove:a.noop,onup:a.noop,onremove:a.noop,onshow:a.noop,onhide:a.noop,onfull:a.noop,onunfull:a.noop,init:function(b,d){var e,h,i,k,l=this,m=l.left,n=l.top,o=l.resize,p=l.down,q=l.up,r=l.move,s=l.fullSwitch,t=l.size,u=l.remove;l.wrapper=a(b),l.contentVal=l.wrapper.html(),l.resize=j(l,o),l.down=j(l,p),l.up=j(l,q),l.move=j(l,r),l.fullSwitch=j(l,s),l.size=j(l,t),l.remove=j(l,u),d&&a.each(d,function(a,b){l[a]=b}),l.tpl_actions={},l.tpl_actions.close='<a href="javascript:void(0)" class="lu-window-action lu-window-action-close">Ã—</a>';for(var v in l.actions)l.tpl_actions_show=l.tpl_actions[l.actions[v]];if(l.tpl_header='<div class="lu-window-header"><div class="lu-window-title">'+l.title+'</div><div class="lu-window-actions">'+l.tpl_actions_show+"</div></div>",l.tpl_content='<div class="lu-window-content">'+l.contentVal+"</div>",l.tpl_drag='<div class="lu-window-resize lu-window-resize-n"></div><div class="lu-window-resize lu-window-resize-e"></div><div class="lu-window-resize lu-window-resize-s"></div><div class="lu-window-resize lu-window-resize-w"></div><div class="lu-window-resize lu-window-resize-se"></div><div class="lu-window-resize lu-window-resize-sw"></div><div class="lu-window-resize lu-window-resize-ne"></div><div class="lu-window-resize lu-window-resize-nw"></div>',l.tpl="",l.showHeader&&(l.tpl=l.tpl_header),l.tpl=l.drag?l.tpl+l.tpl_content+l.tpl_drag:l.tpl+l.tpl_content,l.tpl='<div class="lu-window">'+l.tpl+"</div>",c.append(l.tpl),l.dialog=c.find(".lu-window").last().css({margin:0}),l.handle=l.dialog.find(".lu-window-header"),l.content=l.dialog.find(".lu-window-content"),l.resizes={nw:l.dialog.find(".lu-window-resize-nw"),n:l.dialog.find(".lu-window-resize-n"),ne:l.dialog.find(".lu-window-resize-ne"),e:l.dialog.find(".lu-window-resize-e"),se:l.dialog.find(".lu-window-resize-se"),s:l.dialog.find(".lu-window-resize-s"),sw:l.dialog.find(".lu-window-resize-sw"),w:l.dialog.find(".lu-window-resize-w")},l.close=l.dialog.find(".lu-window-action-close"),l.clientX=l.clientY=0,l.minWidth=l.content[0].clientWidth,l.minHeight=l.content[0].clientHeight,l.xBorder=l.content[0].offsetWidth-l.content[0].clientWidth,l.yBorder=l.content[0].offsetHeight-l.content[0].clientHeight,i=l.dialog[0].getBoundingClientRect(),k=l.content[0].getBoundingClientRect(),l.xSize=k.left-i.left+i.right-k.right,l.ySize=k.top-i.top+i.bottom-k.bottom,l.drag){h=l.resizes;for(e in h)a(h[e]).bind("mousedown",l.down).css("cursor",e+"-resize")[0]["{$resizes}"]=e;l.handle.bind("mousedown",l.down).css("cursor","move")}document.all||f.bind("resize",l.resize),l.dblfull&&l.handle.bind("dblclick",l.fullSwitch),l.close.bind("click",l.remove),g.bind("dblclick",l.up),l.dialog.css("position",l.fixed?"fixed":"absolute"),l.position(m,n),l.size(l.width,l.height),l.position(m,n)},show:function(){var a=this;a.dialog.css("visibility","visible"),a.onshow(a.dialog)},hide:function(){var a=this;a.dialog.css("visibility","hidden"),a.onhide(a.dialog)},position:function(a,b){var c,d,e=this,f=e.dialog[0].style;e.positionAuto=function(){switch(e.setCache(),a){case"left":c=e.minLeft;break;case"center":c=Math.max(Math.min(e.centerX,e.maxLeft),e.minLeft);break;case"right":c=e.maxLeft;break;default:c=a}switch(b){case"top":d=e.minTop;break;case"center":d=Math.max(Math.min(e.centerY,e.maxTop),e.minTop);break;case"bottom":d=e.maxTop;break;default:d=b}f.left=(e.limit?Math.max(e.minLeft,Math.min(c,e.maxLeft)):c)+"px",f.top=(e.limit?Math.max(e.minTop,Math.min(d,e.maxTop)):d)+"px"},e.positionAuto(),e.zIndex()},follow:function(b){var c=this,d=b&&a(b)||c.followElem,e=f.width(),h=f.height(),i=g.scrollLeft(),j=g.scrollTop(),k=d.offset(),l=d[0].offsetWidth,m=d[0].offsetHeight,n=c.fixed?k.left-i:k.left,o=c.fixed?k.top-j:k.top,p=c.dialog[0],q=p.style,r=p.offsetWidth,s=p.offsetHeight,t=n-(r-l)/2,u=o+m,v=c.fixed?0:i,w=c.fixed?0:j;t+r>e&&(t=n-r+l),v>t&&(t=n),u+s>h+w&&(u=o-s),q.left=t+"px",q.top=u+"px",c.followElem=d,c.positionAuto=c.follow,c.zIndex()},size:function(a,b,c){var d=this;c||(a-=d.xSize,b-=d.ySize),d.setCache(),a=Math.max(Math.min(a,d.maxWidth),d.minWidth),b=Math.max(Math.min(b,d.maxHeight),d.minHeight),d.dialog.css({width:"auto",height:"auto"}),d.content.css({width:a+"px",height:b+"px"})},full:function(){var a=this,b=f.width()-a.xSize,c=f.height()-a.ySize;a.recordWidth=a.offsetWidth,a.recordHeight=a.offsetHeight,a.recordLeft=a.left,a.recordTop=a.top,a.dialog.css({width:"auto",height:"auto",left:0,top:0}),a.content.css({width:b+"px",height:c+"px"}),a.onfull(a.dialog)},fullSwitch:function(){var a=this,b=f.width()-a.xSize,c=f.height()-a.ySize;Math.abs(a.maxWidth-b)<5&&Math.abs(a.maxHeight-c)<5?(a.size(a.recordWidth,a.recordHeight),a.position(a.recordLeft,a.recordTop),a.onunfull(a.dialog)):a.full()},zIndex:function(){var a=this;i=Math.max(parseFloat(a.dialog.css("zIndex"))||0,i),i++,a.dialog.css("zIndex",i),a.mask&&a.mask.css("zIndex",i-1),d&&d.removeClass(a.topStyle),d=a.dialog,a.dialog.addClass(a.topStyle)},remove:function(){var a=this;a.up(),f.unbind("resize",a.resize),a.dialog.remove(),a.onremove()},setCache:function(a){var b=this,c=b.dialog[0],d=(b.content[0],c.offsetWidth),e=c.clientWidth,h=f.width(),i=f.height(),j=c.offsetHeight,k=c.clientHeight,l=b.fixed?0:g.scrollLeft(),m=b.fixed?0:g.scrollTop(),n=parseFloat(b.dialog.css("left")||0),o=parseFloat(b.dialog.css("top")||0),p=[1,1,0,0],q={nw:[1,1,-1,-1],n:[0,1,0,-1],ne:[0,1,1,-1],e:[0,0,1,0],se:[0,0,1,1],s:[0,0,0,1],sw:[1,0,-1,1],w:[1,0,-1,0]},r=a&&a.target["{$resizes}"],s=r&&q[r]||p;a&&(b.clientX=a.clientX,b.clientY=a.clientY),b.dragKey=s,b.isMove=r?!1:!0,b.clientWidth=e,b.clientHeight=k,b.offsetWidth=d,b.offsetHeight=j,b.left=n,b.top=o,b.minLeft=l,b.minTop=m,b.maxLeft=b.isMove||1!==s[0]?h-d+l:n+e-b.minWidth-b.xSize,b.maxTop=b.isMove||1!==s[1]?i-j+m:o+k-b.minHeight-b.ySize,b.maxWidth=(0===s[0]?h-n+l:d+n-l)-b.xSize,b.maxHeight=(0===s[1]?i-o+m:j+o-m)-b.ySize,b.centerX=(b.maxLeft+l)/2,b.centerY=4*i/7>j?.382*i-j/2+m:(b.maxTop+m)/2},clsSelect:"getSelection"in b?function(){b.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(a){}},resize:function(){this.positionAuto()},down:function(a){var b=this;b.drag&&(b.setCache(a),b.zIndex(),g.bind("mousemove",b.move).bind("mouseup",b.up),h&&b.handle[0].setCapture(),a.preventDefault(),b.ondown(b.left,b.top,b.offsetWidth,b.offsetHeight))},up:function(a){var b=this;g.unbind("mousemove",b.move).unbind("mouseup",b.up),h&&b.handle[0].releaseCapture(),b.setCache(a),b.onup(b.left,b.top,b.offsetWidth,b.offsetHeight)},move:function(a){var b,c,d,e,f,g,h=this,i=a.clientX-h.clientX,j=a.clientY-h.clientY;h.drag&&(d=i*h.dragKey[0]+h.left,e=j*h.dragKey[1]+h.top,f=Math.max(i*h.dragKey[2]+h.clientWidth-h.xSize,h.minWidth),g=Math.max(j*h.dragKey[3]+h.clientHeight-h.ySize,h.minHeight),(h.limit||!h.isMove)&&(d=Math.max(Math.min(d,h.maxLeft),h.minLeft),e=Math.max(Math.min(e,h.maxTop),h.minTop),f=Math.min(f,h.maxWidth),g=Math.min(g,h.maxHeight)),0>e&&(e=0),b=h.dialog[0].style,c=h.content[0].style,b.left=d+"px",b.top=e+"px",c.width=f+"px",c.height=g+"px",h.clsSelect(),h.onmove(d,e,h.dialog[0].offsetWidth,h.dialog[0].offsetHeight))}}}(window.Zepto||window.jQuery,this);